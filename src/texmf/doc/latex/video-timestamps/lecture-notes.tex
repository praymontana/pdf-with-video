\documentclass{article}

\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\usepackage{hyperref}
\usepackage{float}
\usepackage{amsmath}

\title{Инструкция по написанию конспектов к видео лекциям}
\author{Посов Илья}
\date{\today}

\sloppy

\begin{document}
    \maketitle


    \section{Введение}
    Репозиторий \url{https://github.com/ipo-kio/pdf-with-video} содержит инструменты для написания конспектов к
    видео-лекциям.
    Внутри репозитория находятся:
    \begin{enumerate}
        \item \LaTeX-класс для оформления конспектов лекций;
        \item пакет \texttt{timestamps} для указания меток времени внутри конспектов;
        \item приложение, работающее в браузере, для проверки связи конспекта с видео;
        \item сами конспекты лекций.
    \end{enumerate}

    В дальнейших разделах предполагается, что вы сумели клонировать себе репозиторий.
    Инструкции по работе с git
    при необходимости будут написаны отдельно.


    \section{Установка}
    Чтобы писать конспекты в \LaTeX, необходимо настроить свой дистрибутив \TeX, чтобы он мог найти
    необходимые классы и пакеты.
    Напомню, что \LaTeX-документы начинаются с команды, указывающей класс документа, в нашем случае
    используется класс \texttt{lecture-notes}, и это указывается следующим образом:

    \begin{verbatim}\documentclass[russian]{lecture-notes}
    \end{verbatim}

    Простейший способ заставить \LaTeX увидеть этот класс~--- это просто скопировать файл lecture-notes.cls
    в папку с конспектом. Но этот метод нужно использовать только в крайнем случае, потому что класс будет
    постоянно изменяться, и будет очень неудобно постоянно копировать его новые версии. Правильный способ настроить
    класс~--- это добавить каталог с классом в список каталогов, которые ваш дистрибутив \TeX
    просматривет при поиске классов.

    В случае с MikTeX процесс описан по ссылке \url{https://miktex.org/kb/texmf-roots}, смотрите нижний раздел про
    добавление собственных texmf-директорий.
    Вам нужно добавить директорию \texttt{/src/texmf} из репозитория.

    В случае, если вы пользуетесь Linux с дистрибутивом texlive, создайте каталог \texttt{~/texmf/}, это каталог внутри
    домашнего каталога. И вставьте в нем символьную ссылку на каталог внутри репозитория:

    \begin{verbatim}
mkdir -p ~/texmf/tex/latex
ln -s репозиторий/src/texmf/tex/latex/video-timestamps \
      ~/texmf/tex/latex/video-timestamps
    \end{verbatim}


    \section{Написание конспекта}

    Шаблон конспекта расположен в файле \\ \texttt{src/texmf/doc/latex/video-timestamps/lecture-notes.tex}.

    Редакторов для \LaTeX много, я рекомендую \href{https://www.texstudio.org/}{TeXStudio}.

    Чтобы сделать свой конспект, скопируйте этот файл и сделайте в нем необходимые исправления. Сам файл
    содержит разметку, которая требуется для конспекта и примеры часто необходимых возможностей, например,
    как писать формулы и как вставлять изображения. В файле есть только примеры, более полная информация
    находится здесь, либо в учебниках \LaTeX. Я рекомендую учебники на сайте
    \href{https://www.overleaf.com/learn}{Overleaf} и \href{https://en.wikibooks.org/wiki/LaTeX}{LaTeX wiki book}.

    Готовые конспекты должны быть расположены в каталоге \texttt{scr/lectures}, по отдельному каталогу
    на каждую лекцию. Если курс содержит несколько лекций, значит, нужно создать каталог для курса, а внутри
    каталоги отдельных лекций.

    В репозиторий необходимо добавлять только tex файлы с текстом и изображения. Все остальные типы файлов, которые
    генерирует TeX, например, log или aux файлы, не должны попадать в репозиторий. Они явно игнорируются в .gitignore.


    \section{Изображения в конспекте}

    Примеры, как вставлять изображения, есть в шаблоне конспекта. Здесь обсудим выбор форматов изображений.

    Используйте формат jpg для фотографий. Скриншоты сохраняются в формате png.

    \subsection{Свои рисунки в конспекте}
    Если вы делаете свой рисунок, то есть три возможности:
    \begin{enumerate}
        \item растровое изображение в формате png;
        \item векторное изображение в формате svg;
        \item векторное изображение с помощью пакета \texttt{tikz}.
    \end{enumerate}

    Изображения в формате png лучше избегать. Их труднее редактировать, они теряют качество при масштабировании,
    и они занимают больше места, особенно, если у них несколько версий в git репозитории.

    Пакет \texttt{tikz}~--- это хороший вариант, особенно хорошо этот
    формат подходит для описания графов. Но рисовать с его помощью сложно, потому положения точек
    вводятся координатами, и в языке есть команды, которые надо изучать.
    Либо нужно найти программы для рисования, которые способны генерировать tikz код.

    В общем случае рекомендуется использовать формат svg. Для редактирования изображений в этом формате используйте программу
    Inkscape, это бесплатный многофункциональный редактор векторной графики типа Corel Draw или Adobe Illustrator.
    Его в любом случае потребуется установить, если вы решите пользоваться svg изображениями в \LaTeX-документах, потому что \LaTeX\ использует ее внутри себя для чтения svg.

    Чтобы svg изображения вставлялись в конспект, нужны дополнительные действия по настройке \LaTeX.
    Кроме установки Inkscape проследите, чтобы при компиляции конспекта был указан параметр компиляции
    \texttt{{-}-shell-escape}. При компиляции из командной строки пишите:
    \begin{verbatim}pdflatex --shell-escape my-notes.tex
    \end{verbatim}
    При компиляции в TeXStudio, отройте меню Options, внутри Configure TeXStudio, вкладка Commands, впишите
    в PDFLaTeX компилятор нужную опцию, получится что-то типа:
    \begin{verbatim}pdflatex -synctex=1 -interaction=nonstopmode --shell-escape %.tex
    \end{verbatim}
    Эта опция нужна, чтобы разрешить \LaTeX\ запускать внешние программы, в нашем случае Inkscape, в процессе
    компиляции. По-умолчанию это отключено из соображений безопасности.


    \section{Проверка конспекта в браузере с видео}
    Раздел пишется...


    \section{Важные правила при оформлении текста в LaTeX}

    В этом разделе обсуждаются частые ошибки и трудности, которые возникают при
    использовании \LaTeX.

    \subsection{Разделение представления и содержания}

    При наборе \LaTeX\ документа важно разделить содержание документа и описание того,
    как документ выглядит.
    Это позволяет оформить документ единообразно, т.е. чтобы одинаковые по смыслу элементы
    выглядели тоже одинаково. Например, все заголовки разделов должны иметь одинаковый шрифт
    и отступы вокруг. Подписи под изображениями должны быть одинаково выровнены и тоже иметь
    одинаковый шрифт. Если нужно начинать все главы с новой страницы,
    это тоже должно быть описано один раз на уровне оформления документа, и об
    этом не следует каждый раз заботиться при наборе очередной главы. Может добавиться
    дополнительное требование, что начинать главы нужно всегда с нечетной страницы, этого
    было бы трудно добиться, расставляя переводы страниц вручную.

    Аналогия разделения оформления и содержания в мире веб разработки~--- это разделение
    документа на html, т.е. содержание, и css таблицу стилей, т.е. оформление.

    Какие команды относятся к оформлению:
    \begin{enumerate}
        \item команды установки размеров страницы, полей, колонтитулов;
        \item команды выбора шрифта или стиля шрифта: жирный, наклонный, курсив и т.п.;
        \item команды выбора размера шрифта;
        \item команды перехода на следующую строку или новую страницу: \verb|\newpage|
        или \verb|\\|;
        \item Вертикальные и горизонтальные отступы: \verb|\vskip|, \verb|\hskip|,
        \item Пробелы разной ширины: \verb*|\:|, \verb*|\;|, \verb|\quad| и т.п.
        \verb|\hspace|, \verb|\vspace| и т.п.
        \item команды смены выравнивания: по левому краю, по правому краю, по центру и т.п.
    \end{enumerate}

    Эти команды нужно избегать при написании текстов. Вместо этого нужно использовать команды,
    которые помечают смысл участков текста. Например, если необходимо выделить курсивом
    какое-то слово в тексте, это означает, что вы хотите, чтобы читатель обратил на него внимание.
    И правильная команда будет команда \verb|\emph{важное слово}|, которая говорит, что
    это место необходимо выделить. Чаще всего выделение будет сделано курсивом, но это не
    обязательно. Внутри курсива для выделения будет использоваться прямой шрифт, а если вы
    подключите пакет для презентаций beamer, выделение будет сделано цветом.

    При написании конспекта необходимо использовать класс документа lecture-notes. В этом
    классе описано оформление конспектов. Задача автора конспекта набрать текст и правильно
    выделить в нем смысловые участки: разделы, подразделы, теоремы, доказательства, замечания,
    определения. Описание внешнего вида этих участков~--- шрифтов, отступов, требований к положению
    на листе, находится внутри класса.

    Такое выделение оформления в класс позволит сделать все конспекты единообразными,
    и позволит одновременно изменять оформление всех конспектов. Такой же стиль написания текстов
    применим и при использовании офисных продуктов типа Word. В Word можно задавать абзацам
    стили и настраивать отдельно каждый стиль абзаца: шрифт, отступы, выравнивание. Я рекомендую
    научиться использовать Word именно таким образом вместо того, чтобы давать явные команды
    на изменение шрифтов. Это избавляет от очень распространенных ошибок в оформлении Word
    документов, когда разные части документа набраны разными шрифтами. Допустим,
    в одном месте картинка подписана в Times New Roman, а в другом~--- Arial.
    Имейте привычку задавать абзацу стиль вместо того, чтобы вручную его форматировать.

    \subsubsection{Что если все-таки нужно настроить оформление}
    Если в конспекте требуется какая-то команда, управляющая оформлением, например,
    добавляющая вертикальный отступ, остановитесь и подумайте. Действительно, отделить
    оформление возможно не всегда, выше описана идеальная ситуация, когда оформление
    находится внутри класса, а в конспекте находится только содержание. Совершенно нормально,
    что \TeX\ не смог где-то хорошо отобразить текст, и требуется ему помочь, например,
    правильным отступом.

    Возможно, проблема решается правильной расстановкой смысловых блоков. Например, отступа
    не хватает, потому что вы забыли написать команду начала раздела или не указали, что
    вы пишете определение.

    Другая ситуация, если вы поймете, что появился новый, не учтенный в классе смысловой блок.
    Допустим, в отдельной лекции лектор часто вставляет рекламу других курсов. В этом случае
    необходимо самостоятельно завести блок <<реклама>>, аналогичный блоку <<замечание>>
    или <<теорема>>. Это делается один раз в заголовке документа. Возможно, со временем
    этот блок добавится в класс, если окажется, что такой блок нужен для многих конспектов.

    Последняя ситуация~--- это когда действительно нужна единоразовая команда смены шрифта
    или установки отступа. И больше подобные ситуации в конспекте не ожидаются. В этом случае
    вставляйте случайную команду оформления прямо в текст, к сожалению, это
    распространенная ситуация. Только следите, что будет происходить дальше. Если вы поймете, что
    в конспекте нужно много раз сделать аналогичное исправление, значит, все же
    есть какой-то смысл за этим исправлением, и необходимо ввести для него
    собственную команду или собственное окружение.

    \subsection{Математический режим}
    В тексте важно вовремя включать математический режим. Перейти в режим можно либо с помощью долларов \verb|$формула$| для формул внутри строки, либо командами \verb|\[формула\]| для выключенных формул, т.е. формул на отдельной строке.
    Обратите внимание, что при написании конспекта нужно использовать именно такой способ оформления формул, потому что стандартный способ через двойные доллары \verb|$$формула$$| недостаточно гибок.
    Команду \verb|\[| можно переопределять и настраивать, например, можно заставить ее нумеровать формулы.

    Математический режим помимо прочего переходит на отдельный математический шрифт.
    Поэтому важно переходить в этот режим при вводе всех математических объектов.
    Например, лучше писать \begin{verbatim}Решите уравнение и найдите $x$
    \end{verbatim} а не \begin{verbatim}Решите уравнение и найдите x
    \end{verbatim} потому что во втором случае $x$ будет набран неправильным шрифтом.

    \subsection{Пробелы в математическом режиме}
    В математическом режиме все введенные пользователем пробелы игнорируются, и правильные пробелы расставляются автоматически.
    Поэтому важно правильно выбирать математические команды, чтобы \LaTeX\ понял смысл формулы.
    Несколько примеров для пояснения.

    \begin{table}[H]
        \begin{tabular}{|p{0.35\textwidth} | l  | l |}
            \hline
            Неправильно. Здесь $sin$ это как будто произведение трех переменных                                                                          & \verb|$f(x) = sin(x)$|       & $f(x) = sin(x)$       \\
            \hline
            Правильно. Здесь $\sin$ это функция, она набирается прямым шрифтом                                                                           & \verb|$f(x) = \sin(x)$|      & $f(x) = \sin(x)$      \\
            \hline
            Неправильно. Для операции деления с остатком выбран неправильный оператор \verb|\mod| из пакета amsmath, обратите внимание на длинный пробел & \verb|$10 \mod 3 = 1$|       & $10 \mod 3 = 1$       \\
            \hline
            Правильно. Для операции деления с остатком выбран оператор \verb|\bmod|, который является бинарным оператором                                & \verb|$10 \bmod 3 = 1$|      & $10 \bmod 3 = 1$      \\
            \hline
            Кстати, есть еще оператор \verb|\pmod|                                                                                                       & \verb|$10 \equiv 1 \pmod 3$| & $10 \equiv 1 \pmod 3$ \\
            \hline
        \end{tabular}
    \end{table}

    \subsection{Математические символы}
    Необходимо правильно выбирать и математические символы. Очень часто нужны и часто вводятся неправильно следующие символы:
    \begin{table}[H]
        \begin{tabular}{|p{0.35\textwidth} | l  | l |}
            \hline
            Явное умножение               & \verb|$x\cdot y$| или \verb|$A\times B$|         & $x\cdot y$ или $A\times B$                \\
            \hline
            Многоточие                    & \verb|$x_1, x_2, \ldots ,x_n$|                   & $x_1, x_2, \ldots ,x_n$                   \\
            \hline
            Многоточие по середине строки & \verb|$A_1 \times A_2 \times \cdots \times A_n$| & $A_1 \times A_2 \times \cdots \times A_n$ \\
            \hline
            Следствие внутри доказательства & \verb|$x > 1 \implies x > 0$| & $x > 1 \implies x > 0$ \\
            \hline
            Равносильность внутри доказательства & \verb|$x > 1 \iff x - 1 > 0$| & $x > 1 \iff x - 1 > 0$ \\
            \hline
        \end{tabular}
    \end{table}

    Лучше всего, если вы просмотрите один раз, какие вообще бывают математические символы. Полный список символов
    по ссылке \url{http://tug.ctan.org/info/symbols/comprehensive/symbols-a4.pdf}.
    Когда насмотритесь, используйте более короткие и практические списки символов по ссылкам:
    \url{http://webhome.auburn.edu/~tamtiny/Symbols.pdf} или \url{https://oeis.org/wiki/List_of_LaTeX_mathematical_symbols}.

    \subsection{Математические операторы и операции}



    \subsection{Кавычки в русском}

    Кавычки в русском языке бывают двух видов: <<елочки>> и ,,лапки''. Они набираются как
    \verb|<<елочки>> и ,,лапки''|. Не используйте символ \verb|"|, поэтому что он не подходит
    для текстов на русском. Лапки нужно использовать только как кавычки внутри кавычек, в остальных случаях
    используйте елочки. Почитайте в википедии про кавычки в русском языке, чтобы узнать об этом подробней.

    Если вы можете ввести кавычки елочки напрямую с клавиатуры вместо двух символов \verb|<<|, используйте это.
    Это же относится и к другим символам, например, если можете сразу написать ä, пишите, если нет, вводите \verb|\"a|.

    \subsection{Дефис, тире, минус, диапазон}

    Символы дефис, тире, диапазон, минус~--- это четыре разных символа. Они набираются как
    \verb|-|, \verb|--|, \verb|---|, \verb|-| (в математическом режиме) соответственно.
    Ну или они вводятся как отдельный символ, если на вашей клавиатуре можно такой символ
    набрать. Сравните: \verb|сине-зелёный|, \verb|страницы 100--200|,
    \verb|конь~--- это не мышь|, \verb|$2-3=-1$|.

    \subsection{Неразрывный пробел}

    Символ \verb|~| (тильда) используется как неразрывный пробел.
    Его надо ставить перед тире, чтобы тире не оттянулось далеко от предыдущего слова и не перенеслось на следующую строку:
    \begin{verbatim}Число~--- это когда чего-то несколько.
    \end{verbatim}
    Аналогично, его надо ставить перед указанием номера рисунка, ссылкой и т.п.: \verb|рисунок~\ref{fig:1}|.

    \subsection{Теоремы, замечания, доказательства}

    В конспектах часто встречаются структурные блоки типа теорем, лемм, доказательств, замечаний, задач.
    Многие такие блоки уже настроены в классе документа, например, можно писать
    \begin{verbatim}
\begin{theorem}[Основная теорема арифметики]
Условие теоремы
\end{theorem}
\begin{proof}
Доказательство
\end{proof}
    \end{verbatim}
    Все возможные окружения описаны в шаблоне конспекта.
    Там же указаны подробности о том, как включать или отключать нумерацию блоков.
    Если какого-то типа блока не хватает, вы должны ввести его сами, это несложно и описано по ссылке \url{https://www.overleaf.com/learn/latex/theorems_and_proofs}.

    \subsection{Алгоритмы}
    Перед написанием алгоритма посмотрите, не лучше ли будет ввести его с помощью одного из стандартных пакетов
    \url{https://www.overleaf.com/learn/latex/algorithms}. По ссылке описаны пакеты algorithmic и algorithm2e для
    ввода псевдокода, выбор одно из них~--- дело вкуса. И пакет listings для вывода листингов кода.

\end{document}

